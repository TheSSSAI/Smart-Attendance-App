[{'name': 'Request-Reply', 'type': 'RequestReply', 'implementation': 'Synchronous calls using Firebase Callable Functions (HTTPS RPC) for client-to-backend operations, and direct HTTPS/REST API calls for backend-to-external service integrations.', 'applicability': 'Essential for client-initiated actions requiring immediate server-side processing and a direct response, such as user invitations (REQ-1-036), validating circular hierarchies (REQ-1-022), and processing data migration uploads (REQ-1-077). Also used by Cloud Functions to communicate with external APIs like SendGrid and Google Sheets (REQ-1-011).'}, {'name': 'Publish-Subscribe', 'type': 'PublishSubscribe', 'implementation': 'Asynchronous, event-driven processing. Implemented via 1) Firebase service event triggers (e.g., Firestore `onWrite`, Auth `onCreate`) that invoke Cloud Functions, and 2) Firebase Cloud Messaging (FCM) for push notifications.', 'applicability': 'Core to the serverless architecture. Used for reacting to data changes (e.g., clock discrepancy check on write - REQ-1-044), user creation (setting custom claims - REQ-1-029), and sending push notifications to users about new events (REQ-1-056).'}, {'name': 'Retry with Exponential Backoff', 'type': 'Reliability', 'implementation': "Implemented in Cloud Functions when making outbound API calls to external services (Google Sheets, SendGrid). Firebase's event-driven functions also have a built-in retry policy.", 'applicability': 'Critical for ensuring reliability when integrating with third-party services that may experience transient failures. Ensures that operations like sending invitation emails (REQ-1-036) and exporting data to Google Sheets (REQ-1-060) are resilient.'}, {'name': 'Transactional Write', 'type': 'DataConsistency', 'implementation': "Utilizes Firestore's built-in `Transaction` and `Batched Write` capabilities within Cloud Functions.", 'applicability': 'Guarantees atomicity for multi-step data modification operations. Essential for processes like new tenant registration, which must create a tenant document, a user document, and set auth claims as a single, indivisible unit (REQ-1-029).'}, {'name': 'Backend for Frontend (BFF)', 'type': 'ArchitecturalStyle', 'implementation': 'The entire Firebase backend (Firestore with Security Rules, Authentication, and Cloud Functions) is specifically tailored as a backend to serve the needs of the single Flutter client codebase.', 'applicability': 'This pattern describes the overall integration style. The combination of direct, secure data access via the Firestore SDK and targeted business logic via Callable Functions provides an optimized interface for the presentation layer, avoiding the need for a general-purpose API.'}, {'name': 'Client-Side Caching', 'type': 'Performance', 'implementation': 'Leverages the built-in offline persistence feature of the Firestore SDK within the Flutter application.', 'applicability': 'A mandatory pattern to fulfill the offline support requirement (REQ-1-009). Allows users to perform core actions like check-in/out without network connectivity, with data being automatically synchronized when the network is restored (REQ-1-042).'}]

